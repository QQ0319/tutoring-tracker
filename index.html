<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>家教複習課（5次一組）— GitHub Issues 協作版</title>
  <link rel="stylesheet" href="./styles.css" />
  <link rel="icon" href="data:,"/>
</head>
<body>
<header>
  <h1>家教複習課（5次一組）</h1>
  <div class="auth">
    <span id="loginStatus" class="muted">未登入</span>
    <button id="btnLogin" class="primary">以 GitHub 登入</button>
    <button id="btnLogout" class="ghost" hidden>登出</button>
  </div>
  <div class="repoLine">
    <label>資料庫（GitHub Repo）：</label>
    <input id="repoOwner" value="ntu-philo" />
    <span>/</span>
    <input id="repoName" value="tutoring-tracker" />
    <button id="btnSaveRepo" class="ghost">儲存</button>
  </div>
  <div class="workspace">
    <label>工作區代碼（多人協作用）</label>
    <input id="workspaceId" value="家教複習課" />
    <button id="btnJoin" class="ghost">載入紀錄</button>
  </div>
</header>

<main class="grid">
  <section class="card">
    <h2>新增上課紀錄</h2>
    <div class="row">
      <label>科目</label>
      <div class="subjects" id="subjects">
        <button data-subject="國">國</button>
        <button data-subject="英">英</button>
        <button data-subject="數">數</button>
        <button data-subject="社">社</button>
        <button data-subject="自">自</button>
      </div>
    </div>
    <div class="row">
      <label>上課時間</label>
      <input id="dt" type="datetime-local"/>
    </div>
    <div class="row">
      <label>上課內容</label>
      <textarea id="content" rows="3" placeholder="本次重點、進度、練習…"></textarea>
    </div>
    <div class="row">
      <label>作業</label>
      <textarea id="homework" rows="3" placeholder="指定頁數、題目、繳交方式…"></textarea>
    </div>
    <div class="actions">
      <button id="btnSave" class="primary">儲存到 GitHub Issues</button>
      <button id="btnClear" class="ghost">清空</button>
    </div>
    <p id="saveMsg" class="muted"></p>
  </section>

  <section class="card">
    <h2>紀錄與統計</h2>
    <div class="toolbar">
      <select id="filterSubject">
        <option value="">全部科目</option>
        <option value="國">國</option>
        <option value="英">英</option>
        <option value="數">數</option>
        <option value="社">社</option>
        <option value="自">自</option>
      </select>
      <button id="btnExport">匯出 CSV</button>
      <button id="btnPrint">列印/存PDF</button>
    </div>
    <div id="stats" class="stats"></div>
    <div id="list" class="list"></div>
  </section>
</main>

<footer>
  <details>
    <summary>設定說明</summary>
    <ol>
      <li>建立 GitHub OAuth App，填入 <code>GITHUB_CLIENT_ID</code>/<code>GITHUB_CLIENT_SECRET</code> 到 Pages Functions 環境變數。</li>
      <li>允許來源（<code>ALLOWED_ORIGIN</code>）設成此網頁的網域。</li>
      <li>預設 repo：<code>ntu-philo/tutoring-tracker</code>；工作區預設：<code>家教複習課</code></li>
    </ol>
    <p>Issues 會加上標籤：<code>tutoring</code>、<code>class-tracker</code>、<code>ws:&lt;工作區&gt;</code>、<code>subj:&lt;科目&gt;</code>。</p>
  </details>
</footer>

<script src="https://cdn.skypack.dev/@octokit/rest@19"></script>
<script src="./app.js"></script>
</body>
</html>
